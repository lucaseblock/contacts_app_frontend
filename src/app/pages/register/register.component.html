<div class="mat-elevation-z4">
    <mat-card>
		<mat-card-content>
			<form class="flex column" [formGroup]="registerForm" (ngSubmit)="register()">
				<mat-form-field appearance="outline">
					<mat-label>Username</mat-label>
					<input matInput formControlName="username">
				</mat-form-field>
				<mat-form-field appearance="outline">
                    <mat-label>Password</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
                    <button type="button" mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
                        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                </mat-form-field>
				<mat-form-field appearance="outline">
                    <mat-label>Confirm password</mat-label>
                    <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword">
                    <button type="button" mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword">
                        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                </mat-form-field>
				<span
					*ngIf="registerForm.get('password')?.value && registerForm.get('confirmPassword')?.value"
					class="passwords-match"
				>
					<mat-icon *ngIf="!passwordsMatch" class="error">block</mat-icon>
					<mat-icon *ngIf="passwordsMatch" class="success">check</mat-icon>
					Passwords match
				</span>
				<button
					mat-raised-button
					color="primary"
					type="submit"
					[disabled]="registerForm.invalid || loadingRegister"
				>
					<div class="button-content">
						<loading-icon *ngIf="loadingRegister"></loading-icon>
						<span>Register</span>
					</div>
				</button>
			</form>
		</mat-card-content>
		<p>If you already have an account, log in <a routerLink="/login">here</a></p>
    </mat-card>
</div>